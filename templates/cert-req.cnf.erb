################################################################################
# <%= certname %>.cnf - OpenSSL configuration file for the generation 
# of the PKCS#10 X.509 Certificate Signing Request (CSR) 
# See http://www.openssl.org/docs/apps/req.html
#
# ---------- Details of <%= certname %> certificate ----------
# C  = <%= country %>
# L  = <%= locality %>
# O  = <%= organization %>
# OU = <%= organizational_unit %>
# CN = <%= real_commonname %>
# emailAddress = <%= email %>
#
################################################################################
#" /!\ DO NOT EDIT THIS FILE: it has been automatically generated by Puppet.
#      In particular, any further changes will be overwritten at the next puppet
#      invocation
################################################################################

RANDFILE                = $ENV::HOME/.rnd

####################################################################
[ req ]
default_bits            = 2048
default_md              = sha1         # digest algorithm to use ('md5' 'sha1' 'mdc2')
default_days            = <%= days %>
default_keyfile         = privkey.pem
distinguished_name      = req_distinguished_name
# disables prompting of certificate fields and just takes values from the config
# file directly. 
prompt                  = no
<% if altnames and not altnames.empty? -%>
req_extensions          = req_ext
<% end -%>

[ req_distinguished_name ]
countryName                     = <%= country %>
<% if has_variable?("state") -%>
stateOrProvinceName             = <%= state %>
<% end -%>
<% if has_variable?("locality") -%>
localityName                    = <%= locality %>
<% end -%>
organizationName                = <%= organization %>
<% if has_variable?("organisational_unit") -%>
organizationalUnitName          = <%= organizational_unit %>
<% end -%>
commonName                      = <%= real_commonname %>
<% if has_variable?("email") -%>
emailAddress                    = <%= email %>
<% end -%>

<% if altnames and not altnames.empty? -%>
[ req_ext ]
subjectAltName = "<%= altnames.collect! {|i| "DNS: #{i}" }.join(', ') -%>"
<% end %>
